(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/petful.315d0f41.png"},26:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n(0),r=n.n(o),l=n(21),c=n.n(l),u=n(24),s=n(9),i=n(10),m=n(12),p=n(11),d=n(25),E=r.a.createContext({}),f=n(22),h=n.n(f);function g(e){var t=Object(o.useState)(!1),n=Object(d.a)(t,2),a=n[0],l=n[1];return r.a.createElement(E.Consumer,null,(function(t){return r.a.createElement("div",{className:"petful-content"},a?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Welcome to Petful"),r.a.createElement("img",{className:"petful-img",src:h.a,alt:"petful img"}),r.a.createElement("p",null,"We are an animal shelter located in Seattle WA."),r.a.createElement("p",null,"We have a selection of sweet cats and dogs to choose from"),r.a.createElement("p",null,"Adoptions are on a first come first server basis, to begin press start"),r.a.createElement("br",null)),a?r.a.createElement("form",{onSubmit:function(n){!function(t,n){t.preventDefault();var a=t.target.name.value;console.log(a);var o={name:a};a?(n.setName(a),n.addPeople(o),n.setError(""),console.log(n.name),e.history.push("/line")):n.setError("Name is required")}(n,t)}},r.a.createElement("h1",null,"Please enter your name"),r.a.createElement("br",null),r.a.createElement("label",{className:"form"},"Name:"),r.a.createElement("input",{className:"form",name:"name",type:"text",required:!0}),r.a.createElement("p",null,t.error),r.a.createElement("br",null),r.a.createElement("button",{className:"button",type:"submit"},"Enter the adoption line")):r.a.createElement("button",{className:"button",onClick:function(){return l(!0)}},"Start"))}))}function N(){return r.a.createElement("div",{className:"petful-content"},r.a.createElement("h1",null,"Choose your pet"),r.a.createElement("button",{className:"button"},r.a.createElement(a.b,{to:"/dog"},"Dogs")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"button"},r.a.createElement(a.b,{to:"/cat"},"Cats")))}function b(e){var t=function(e,t){t.setError("")};return r.a.createElement(E.Consumer,null,(function(e){return console.log(e),e.cats.length<1?r.a.createElement("div",null,r.a.createElement("h3",null,"No cats available")):r.a.createElement("div",{className:"petful-content"},r.a.createElement(a.b,{onClick:function(n){return t(0,e)},to:"/"},r.a.createElement("h1",null,"Cats")),r.a.createElement("h2",null,e.catNode.name),r.a.createElement("img",{src:e.catNode.imageURL,alt:e.catNode.imageDescription}),r.a.createElement("h3",null,"About your pet"),r.a.createElement("p",null,"Story: ",e.catNode.story),r.a.createElement("p",null,"Gender: ",e.catNode.gender),r.a.createElement("p",null,"Age: ",e.catNode.age),r.a.createElement("p",null,"Breed: ",e.catNode.breed),r.a.createElement("button",{className:"button",onClick:function(t){return function(e,t){var n=t.cats[0],a=t.name;console.log(n),t.adoptCat(n),t.deletePeople(a),t.setError("Congratulations you have successfully adopted your pet"),t.setName(""),t.setCatNode(t.cats[1])}(0,e)}},"Adopt"),r.a.createElement("p",{className:"error"},e.error),r.a.createElement("button",{className:"button"},r.a.createElement(a.b,{onClick:function(n){return t(0,e)},to:"/"},"Go Home")))}))}function v(e){var t=function(e,t){t.setError("")};return r.a.createElement(E.Consumer,null,(function(e){return console.log(e),e.dogs.length<1?r.a.createElement("div",null,r.a.createElement("h3",null,"No dogs available")):r.a.createElement("div",{className:"petful-content"},r.a.createElement(a.b,{onClick:function(n){return t(0,e)},to:"/"},r.a.createElement("h1",null,"Dogs")),r.a.createElement("h2",null,e.dogNode.name),r.a.createElement("img",{src:e.dogNode.imageURL,alt:e.dogNode.imageDescription}),r.a.createElement("h3",null,"About your pet"),r.a.createElement("p",null,"Story: ",e.dogNode.story),r.a.createElement("p",null,"Gender: ",e.dogNode.gender),r.a.createElement("p",null,"Age: ",e.dogNode.age),r.a.createElement("p",null,"Breed: ",e.dogNode.breed),r.a.createElement("button",{className:"button",onClick:function(t){return function(e,t){var n=t.dogs[0],a=t.name;console.log(n),t.adoptDog(n),t.deletePeople(a),t.setError("Congratulations you have successfully adopted your pet"),t.setName(""),t.setDogNode(t.dogs[1])}(0,e)}},"Adopt"),r.a.createElement("p",{className:"error"},e.error),r.a.createElement("button",{className:"button"},r.a.createElement(a.b,{onClick:function(n){return t(0,e)},to:"/"},"Go Home")))}))}var y=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).timeout=0,e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timeout=setInterval((function(){if(e.context.people.length<5)e.context.addPeople({name:"JJ Banks"});else if(e.context.people[0]===e.context.name){if("You are next in line"===e.context.error)return e.context.setError(null),void e.props.history.push("/adopt");e.context.name!==e.context.people[0]||5!==e.context.people.length||e.context.setError("You are next in line")}else{var t=e.context.people[0];e.context.deletePeople(t)}}),2500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeout)}},{key:"render",value:function(){var e=this;return r.a.createElement(E.Consumer,null,(function(t){return console.log(t),r.a.createElement("div",{className:"petful-content"},r.a.createElement("h1",null,"You have been added to the queue"),r.a.createElement("h3",null,"The adoption page will load when your name is up"),r.a.createElement("p",{className:"error-2"},t.error),r.a.createElement("ol",{className:"line"},e.context.people.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))}))}}]),n}(o.Component);y.contextType=E;var P=n(1),C=n(7),j=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={hasError:!1},e}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"Error: Page could not load"):this.props.children}}]),n}(o.Component),D=(n(36),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={cats:[],dogs:[],people:[],error:"",name:"",dogNode:null,catNode:null,peopleNode:null,getCats:function(){fetch("".concat(C.API_ENDPOINT,"/cat")).then((function(e){return e.json()})).then((function(t){e.setState({cats:t,catNode:t[0]})})).catch((function(e){console.log(e)}))},getDogs:function(){fetch("".concat(C.API_ENDPOINT,"/dog")).then((function(e){return e.json()})).then((function(t){e.setState({dogs:t,dogNode:t[0]})})).catch((function(e){console.log(e)}))},getPeople:function(){fetch("".concat(C.API_ENDPOINT,"/people")).then((function(e){return e.json()})).then((function(t){e.setState({people:t})}))},addPeople:function(t){fetch("".concat(C.API_ENDPOINT,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(){e.setState({people:[].concat(Object(u.a)(e.state.people),[t.name])})}))},deletePeople:function(){fetch("".concat(C.API_ENDPOINT,"/people"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({people:e.state.people.slice(1)})})).catch((function(e){throw new Error("could not delete person")}))},adoptCat:function(){fetch("".concat(C.API_ENDPOINT,"/cat"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({cats:t})})).catch((function(e){throw new Error("cat was not adopted")}))},adoptDog:function(){fetch("".concat(C.API_ENDPOINT,"/dog"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(t){e.setState({dogs:e.state.dogs.slice(1)})})).catch((function(e){throw new Error("dog was not adopted")}))},setCatNode:function(t){return e.setState({catNode:t})},setDogNode:function(t){return e.setState({dogNode:t})},setPeopleNode:function(t){return e.setState({peopleNode:t})},setError:function(t){return e.setState({error:t})},setName:function(t){return e.setState({name:t})}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.state.getCats(),this.state.getDogs(),this.state.getPeople()}},{key:"render",value:function(){return r.a.createElement(E.Provider,{value:this.state},r.a.createElement(j,null,r.a.createElement("div",null,r.a.createElement(P.a,{exact:!0,path:"/",component:g}),r.a.createElement(P.a,{path:"/adopt",component:N}),r.a.createElement(P.a,{path:"/dog",component:v}),r.a.createElement(P.a,{path:"/cat",component:b}),r.a.createElement(P.a,{path:"/line",render:function(e){return r.a.createElement(y,e)}}))))}}]),n}(o.Component));c.a.render(r.a.createElement(a.a,null,r.a.createElement(D,null)),document.getElementById("root"))},7:function(e,t){e.exports={API_ENDPOINT:"https://petful-server-esperanza.herokuapp.com/api"}}},[[26,1,2]]]);
//# sourceMappingURL=main.c0c361ca.chunk.js.map